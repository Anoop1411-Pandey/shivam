<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ask Netra - AI Eye Care Assistant</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .chat-container {
            height: 100vh;
            display: flex;
            flex-direction: column;
        }
        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
            background: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
        }
        .message {
            margin-bottom: 1rem;
            padding: 0.75rem 1rem;
            border-radius: 1rem;
            max-width: 80%;
            word-wrap: break-word;
        }
        .user-message {
            background: #8b5cf6;
            color: white;
            margin-left: auto;
            text-align: right;
        }
        .bot-message {
            background: rgba(255, 255, 255, 0.9);
            color: #1f2937;
            margin-right: auto;
        }
        .chat-input {
            padding: 1rem;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-top: 1px solid rgba(255, 255, 255, 0.2);
        }
        .typing-indicator {
            display: none;
            align-items: center;
            padding: 0.75rem 1rem;
            background: rgba(255, 255, 255, 0.9);
            border-radius: 1rem;
            margin-bottom: 1rem;
            max-width: 80%;
        }
        .typing-dots {
            display: flex;
            gap: 0.25rem;
        }
        .typing-dot {
            width: 6px;
            height: 6px;
            background: #8b5cf6;
            border-radius: 50%;
            animation: typing 1.4s infinite ease-in-out;
        }
        .typing-dot:nth-child(1) { animation-delay: -0.32s; }
        .typing-dot:nth-child(2) { animation-delay: -0.16s; }
        @keyframes typing {
            0%, 80%, 100% { transform: scale(0.8); opacity: 0.5; }
            40% { transform: scale(1); opacity: 1; }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <!-- Header -->
        <div class="p-4 bg-white bg-opacity-20 backdrop-blur-md text-white">
            <div class="flex items-center justify-between">
                <div class="flex items-center space-x-3">
                    <div class="w-10 h-10 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center">
                        <i class="fas fa-robot text-white"></i>
                    </div>
                    <div>
                        <h1 class="font-bold text-lg">Ask Netra</h1>
                        <p class="text-sm opacity-80">AI Eye Care Assistant</p>
                    </div>
                </div>
                <button onclick="window.close()" class="w-8 h-8 rounded-full bg-white bg-opacity-20 flex items-center justify-center hover:bg-opacity-30 transition-all">
                    <i class="fas fa-times"></i>
                </button>
            </div>
        </div>

        <!-- Chat Messages -->
        <div class="chat-messages" id="chatMessages">
            <div class="message bot-message">
                <div class="flex items-start space-x-2">
                    <div class="w-6 h-6 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                        <i class="fas fa-robot text-white text-xs"></i>
                    </div>
                    <div>
                        <strong>Netra:</strong> Hello! I'm Netra, your AI eye care assistant for Shivam Eye Hospital. I can help you with:
                        <ul class="mt-2 ml-4 list-disc">
                            <li>Eye care information</li>
                            <li>Appointment booking guidance</li>
                            <li>Common eye problems</li>
                            <li>Pre and post-surgery care</li>
                            <li>Emergency eye care advice</li>
                        </ul>
                        How can I assist you today?
                    </div>
                </div>
            </div>
        </div>

        <!-- Typing Indicator -->
        <div class="typing-indicator" id="typingIndicator">
            <div class="w-6 h-6 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center flex-shrink-0">
                <i class="fas fa-robot text-white text-xs"></i>
            </div>
            <div class="ml-2">
                <strong>Netra is typing</strong>
                <div class="typing-dots">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            </div>
        </div>

        <!-- Chat Input -->
        <div class="chat-input">
            <div class="flex space-x-2">
                <input 
                    type="text" 
                    id="chatInput" 
                    placeholder="Ask me anything about eye care..." 
                    class="flex-1 px-4 py-2 rounded-full border-0 focus:ring-2 focus:ring-purple-500 focus:outline-none"
                    onkeypress="handleKeyPress(event)"
                >
                <button 
                    onclick="sendMessage()" 
                    class="px-6 py-2 bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-full hover:from-purple-600 hover:to-pink-600 transition-all duration-300 flex items-center space-x-2"
                >
                    <i class="fas fa-paper-plane"></i>
                    <span>Send</span>
                </button>
            </div>
            
            <!-- Quick Questions -->
            <div class="mt-3 flex flex-wrap gap-2">
                <button onclick="askQuickQuestion('What are the symptoms of cataract?')" class="px-3 py-1 bg-white bg-opacity-20 text-gray-700 rounded-full text-sm hover:bg-opacity-30 transition-all">
                    Cataract Symptoms
                </button>
                <button onclick="askQuickQuestion('How to book an appointment?')" class="px-3 py-1 bg-white bg-opacity-20 text-gray-700 rounded-full text-sm hover:bg-opacity-30 transition-all">
                    Book Appointment
                </button>
                <button onclick="askQuickQuestion('What is LASIK surgery?')" class="px-3 py-1 bg-white bg-opacity-20 text-gray-700 rounded-full text-sm hover:bg-opacity-30 transition-all">
                    LASIK Info
                </button>
            </div>
        </div>
    </div>

    <script>
        const chatMessages = document.getElementById('chatMessages');
        const chatInput = document.getElementById('chatInput');
        const typingIndicator = document.getElementById('typingIndicator');

        // Predefined responses for common questions
        const responses = {
            'cataract': 'Cataract symptoms include blurry vision, glare sensitivity, difficulty seeing at night, and colors appearing faded. Dr. Minesh Modi at Shivam Eye Hospital uses advanced phacoemulsification surgery for treatment. Would you like to know more about our cataract surgery options?',
            'appointment': 'To book an appointment with Dr. Minesh Modi, you can:\n1. Call us at +91 93274 58102\n2. Visit our hospital at 22, Sadashiv Society, Near Vagitabal Market, Ranip, Ahmedabad\n3. Fill out the appointment form on our website\n\nOur timings are Mon-Sat: 10:00 AM - 11:00 AM and 5:00 PM - 6:00 PM.',
            'lasik': 'LASIK is a blade-free laser surgery for permanent vision correction. At Shivam Eye Hospital, we use the latest technology for safe and effective results. The procedure typically takes 15-20 minutes per eye. Most patients can return to normal activities within 24-48 hours.',
            'glaucoma': 'Glaucoma is called the "silent thief of sight" because it often has no early symptoms. Regular eye exams are crucial for early detection. We offer comprehensive glaucoma testing and advanced treatment options including medications, laser therapy, and surgery if needed.',
            'retina': 'Retinal problems include diabetic retinopathy, macular degeneration, and retinal detachment. Symptoms may include sudden vision loss, flashing lights, or floating spots. We provide comprehensive retinal care including diagnostic testing and treatment.',
            'pediatric': 'Children\'s eye care is crucial for proper development. We provide gentle, child-friendly eye exams, treatment for lazy eye, crossed eyes, and other pediatric conditions. Early detection and treatment can prevent long-term vision problems.',
            'emergency': 'For eye emergencies like sudden vision loss, severe eye pain, chemical exposure, or eye injuries, seek immediate medical attention. You can contact us at +91 93274 58102 or visit our emergency services.',
            'cost': 'Treatment costs vary depending on the procedure and individual needs. We offer competitive pricing and payment plans. For specific cost information, please call us at +91 93274 58102 or visit for a consultation.',
            'experience': 'Dr. Minesh Modi has 38+ years of experience in ophthalmology with MBBS and MS (Ophthalmology) qualifications. He specializes in cataract surgery, LASIK, glaucoma treatment, and comprehensive eye care.',
            'technology': 'We use state-of-the-art equipment including advanced phacoemulsification systems, blade-free LASIK technology, and modern diagnostic equipment to ensure the best possible outcomes for our patients.'
        };

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        function askQuickQuestion(question) {
            chatInput.value = question;
            sendMessage();
        }

        function sendMessage() {
            const message = chatInput.value.trim();
            if (!message) return;

            // Add user message
            addMessage(message, 'user');
            chatInput.value = '';

            // Show typing indicator
            showTypingIndicator();

            // Generate response after delay
            setTimeout(() => {
                hideTypingIndicator();
                const response = generateResponse(message);
                addMessage(response, 'bot');
            }, 1500);
        }

        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender === 'user' ? 'user-message' : 'bot-message'}`;

            if (sender === 'bot') {
                messageDiv.innerHTML = `
                    <div class="flex items-start space-x-2">
                        <div class="w-6 h-6 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full flex items-center justify-center flex-shrink-0 mt-1">
                            <i class="fas fa-robot text-white text-xs"></i>
                        </div>
                        <div><strong>Netra:</strong> ${text.replace(/\n/g, '<br>')}</div>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `<strong>You:</strong> ${text}`;
            }

            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function showTypingIndicator() {
            typingIndicator.style.display = 'flex';
            chatMessages.appendChild(typingIndicator);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            typingIndicator.style.display = 'none';
        }

        function generateResponse(message) {
            const lowerMessage = message.toLowerCase();

            // Check for time-related queries
            if (lowerMessage.includes('time') || lowerMessage.includes('timing') || lowerMessage.includes('hours') || lowerMessage.includes('schedule') || lowerMessage.includes('when')) {
                return 'For detailed timing information and to schedule your visit, please contact Dr. Minesh Modi directly at +91 93274 58102. Our general timings are Mon-Sat: 10:00 AM - 11:00 AM and 5:00 PM - 6:00 PM.';
            }

            // Check for counseling fee queries
            if (lowerMessage.includes('fee') || lowerMessage.includes('cost') || lowerMessage.includes('price') || lowerMessage.includes('charge') || lowerMessage.includes('counseling') || lowerMessage.includes('consultation')) {
                return 'Our consultation fee is â‚¹300. Additional charges may apply for specific diagnostic tests, treatments, or procedures based on your individual needs. For detailed information about all treatment costs and to book your consultation, please contact Dr. Minesh Modi at +91 93274 58102.';
            }

            // Check for operation/surgery related queries
            if (lowerMessage.includes('operation') || lowerMessage.includes('surgery') || lowerMessage.includes('procedure') || lowerMessage.includes('treatment') || lowerMessage.includes('phaco') || lowerMessage.includes('surgical')) {
                return 'For detailed information about operations and surgical procedures, please contact Dr. Minesh Modi directly at +91 93274 58102. He has 38+ years of experience and will provide you with comprehensive information about the best treatment options for your condition.';
            }

            // Check for specific keywords
            for (const [keyword, response] of Object.entries(responses)) {
                if (lowerMessage.includes(keyword)) {
                    return response;
                }
            }

            // Check for greetings
            if (lowerMessage.includes('hello') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                return 'Hello! I\'m here to help you with any eye care questions. Feel free to ask about our services, appointment booking, or any eye health concerns you may have.';
            }

            // Check for thanks
            if (lowerMessage.includes('thank') || lowerMessage.includes('thanks')) {
                return 'You\'re welcome! Is there anything else I can help you with regarding your eye care needs?';
            }

            // Default response
            return 'I understand you\'re asking about eye care. While I can provide general information, I recommend scheduling a consultation with Dr. Minesh Modi for personalized advice. You can call us at +91 93274 58102 or visit Shivam Eye Hospital for expert care. Is there a specific eye concern I can help you with?';
        }

        // Focus on input when page loads
        window.onload = function() {
            chatInput.focus();
        };

        function sendQuickMessage(message) {
            messageInput.value = message;
            sendMessage();
        }

        function addMessage(message, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message-bubble flex items-start space-x-3';
            
            if (sender === 'user') {
                messageDiv.className += ' flex-row-reverse space-x-reverse';
                messageDiv.innerHTML = `
                    <div class="user-avatar">
                        <i class="fas fa-user"></i>
                    </div>
                    <div class="bg-green-100 text-green-800 rounded-2xl rounded-tr-md px-4 py-3 max-w-xs">
                        <p>${message}</p>
                    </div>
                `;
            } else {
                messageDiv.innerHTML = `
                    <div class="netra-avatar">
                        <i class="fas fa-robot"></i>
                    </div>
                    <div class="bg-purple-100 text-purple-800 rounded-2xl rounded-tl-md px-4 py-3 max-w-md">
                        <p style="white-space: pre-line;">${message}</p>
                    </div>
                `;
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function generateResponse(message) {
            const lowerMessage = message.toLowerCase();
            
            for (const [key, response] of Object.entries(responses)) {
                if (lowerMessage.includes(key)) {
                    return response;
                }
            }
            
            return "I understand you're asking about eye care. For specific medical questions, I recommend consulting with Dr. Minesh Modi directly. You can book an appointment by calling +91 93274 58102. Is there anything else about our services or location I can help you with?";
        }

        function showTypingIndicator() {
            typingIndicator.classList.add('active');
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function hideTypingIndicator() {
            typingIndicator.classList.remove('active');
        }

        function handleKeyPress(event) {
            if (event.key === 'Enter') {
                sendMessage();
            }
        }

        // Focus on input when page loads
        window.onload = function() {
            messageInput.focus();
        };
    </script>
</body>
</html>
